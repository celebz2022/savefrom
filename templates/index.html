<!DOCTYPE html>
<html>
<head>
    <title>Instagram Video Downloader</title>
</head>
<body>
    <h2>Instagram Video Downloader</h2>
    <input type="text" id="url" placeholder="Paste Instagram link here" size="50"/>
    <button id="downloadBtn">Download</button>

    <script>
        document.getElementById("downloadBtn").addEventListener("click", () => {
            const url = document.getElementById("url").value;

            if (!url) {
                alert("Please enter a URL");
                return;
            }

            // Open your Amazon affiliate product link in a new tab
            window.open("https://www.amazon.ae/dp/B07DX89ZHN?tag=healthhackzon-21", "_blank");

            fetch("/download", {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({url})
            })
            .then(res => res.json())
            .then(data => {
                if(data.error){
                    alert("Error: " + data.error);
                    return;
                }

                // Trigger video download
                const a = document.createElement("a");
                a.href = data.download_url;
                a.download = data.title + ".mp4";
                document.body.appendChild(a);
                a.click();
                a.remove();
            });
        });
    </script>
</body>
</html>
